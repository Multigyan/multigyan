// Performance optimization utilities\n\n/**\n * Optimized image loader for Next.js Image component\n * Provides automatic format optimization and responsive sizing\n */\nexport function optimizedImageLoader({ src, width, quality = 75 }) {\n  // If using Cloudinary, optimize the URL\n  if (src.includes('cloudinary.com')) {\n    const cloudinaryBaseUrl = src.split('/upload/')[0] + '/upload/'\n    const imagePath = src.split('/upload/')[1]\n    \n    // Add Cloudinary transformations for optimization\n    const transformations = [\n      `w_${width}`,\n      `q_${quality}`,\n      'f_auto', // Automatic format selection\n      'c_limit' // Limit to specified dimensions\n    ].join(',')\n    \n    return `${cloudinaryBaseUrl}${transformations}/${imagePath}`\n  }\n  \n  // For other images, return as-is (Next.js will handle optimization)\n  return src\n}\n\n/**\n * Generate responsive image sizes for different breakpoints\n */\nexport function generateImageSizes() {\n  return {\n    mobile: '(max-width: 640px) 100vw',\n    tablet: '(max-width: 1024px) 50vw',\n    desktop: '25vw'\n  }\n}\n\n/**\n * Create optimized image props for Next.js Image component\n */\nexport function createOptimizedImageProps({\n  src,\n  alt,\n  width = 800,\n  height = 600,\n  priority = false,\n  quality = 75,\n  sizes\n}) {\n  return {\n    src,\n    alt,\n    width,\n    height,\n    priority,\n    quality,\n    sizes: sizes || '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n    placeholder: 'blur',\n    blurDataURL: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkbHB0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q=='\n  }\n}\n\n/**\n * Lazy loading utility for components\n */\nexport function createLazyLoadedComponent(importFunc) {\n  return lazy(importFunc)\n}\n\n/**\n * Cache control headers for different types of content\n */\nexport const CACHE_HEADERS = {\n  // Static assets (images, CSS, JS)\n  STATIC: {\n    'Cache-Control': 'public, max-age=31536000, immutable'\n  },\n  \n  // Blog posts and articles\n  CONTENT: {\n    'Cache-Control': 'public, s-maxage=3600, stale-while-revalidate=86400'\n  },\n  \n  // API responses\n  API: {\n    'Cache-Control': 'public, s-maxage=300, stale-while-revalidate=600'\n  },\n  \n  // RSS feeds and sitemaps\n  FEEDS: {\n    'Cache-Control': 'public, s-maxage=1800, stale-while-revalidate=3600'\n  },\n  \n  // Dynamic content\n  DYNAMIC: {\n    'Cache-Control': 'public, s-maxage=60, stale-while-revalidate=300'\n  }\n}\n\n/**\n * Compress text content for better performance\n */\nexport function compressText(text, maxLength = 160) {\n  if (!text || text.length <= maxLength) return text\n  \n  return text.substring(0, maxLength - 3) + '...'\n}\n\n/**\n * Generate WebP fallback for images\n */\nexport function generateWebPFallback(src) {\n  // If Cloudinary URL, add WebP format\n  if (src.includes('cloudinary.com')) {\n    const parts = src.split('/upload/')\n    if (parts.length === 2) {\n      return `${parts[0]}/upload/f_webp/${parts[1]}`\n    }\n  }\n  \n  return src\n}\n\n/**\n * Preload critical resources\n */\nexport function preloadCriticalResources() {\n  return [\n    {\n      rel: 'preload',\n      href: '/fonts/inter-var.woff2',\n      as: 'font',\n      type: 'font/woff2',\n      crossOrigin: 'anonymous'\n    },\n    {\n      rel: 'dns-prefetch',\n      href: '//fonts.googleapis.com'\n    },\n    {\n      rel: 'dns-prefetch', \n      href: '//res.cloudinary.com'\n    }\n  ]\n}\n\n/**\n * Monitor Core Web Vitals\n */\nexport function monitorWebVitals() {\n  if (typeof window !== 'undefined' && 'performance' in window) {\n    // Monitor Largest Contentful Paint (LCP)\n    new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries()\n      const lastEntry = entries[entries.length - 1]\n      \n      // Send to analytics\n      if (window.gtag) {\n        window.gtag('event', 'web_vitals', {\n          event_category: 'Web Vitals',\n          event_label: 'LCP',\n          value: Math.round(lastEntry.startTime)\n        })\n      }\n    }).observe({ entryTypes: ['largest-contentful-paint'] })\n    \n    // Monitor First Input Delay (FID)\n    new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries()\n      entries.forEach((entry) => {\n        if (window.gtag) {\n          window.gtag('event', 'web_vitals', {\n            event_category: 'Web Vitals',\n            event_label: 'FID',\n            value: Math.round(entry.processingStart - entry.startTime)\n          })\n        }\n      })\n    }).observe({ entryTypes: ['first-input'] })\n    \n    // Monitor Cumulative Layout Shift (CLS)\n    let clsValue = 0\n    new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries()\n      entries.forEach((entry) => {\n        if (!entry.hadRecentInput) {\n          clsValue += entry.value\n        }\n      })\n      \n      if (window.gtag) {\n        window.gtag('event', 'web_vitals', {\n          event_category: 'Web Vitals',\n          event_label: 'CLS',\n          value: Math.round(clsValue * 1000)\n        })\n      }\n    }).observe({ entryTypes: ['layout-shift'] })\n  }\n}"