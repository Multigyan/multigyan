@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --radius: 0.625rem;
  
  /* ✅ Spacing Scale */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;
  
  /* ✅ Animation Durations */
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  
  /* ✅ Z-Index Scale */
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal: 1040;
  --z-popover: 1050;
  --z-tooltip: 1060;
  --z-nprogress: 9999;
  
  /* Blue, White, Gray Color Scheme */
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  
  /* Primary Blue */
  --primary: 221.2 83.2% 53.3%;
  --primary-foreground: 210 40% 98%;
  
  /* Secondary Gray */
  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  
  /* Muted Gray tones */
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  
  /* Accent - Light blue */
  --accent: 214.3 100% 97.1%;
  --accent-foreground: 221.2 83.2% 53.3%;
  
  /* Destructive (Red for errors) */
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  
  /* Borders and inputs */
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 221.2 83.2% 53.3%;
  
  /* Success and Warning colors */
  --success: 142.1 76.2% 36.3%;
  --success-foreground: 210 40% 98%;
  --warning: 38 92% 50%;
  --warning-foreground: 222.2 47.4% 11.2%;
}

.dark {
  /* Dark theme with Blue, Gray, Dark combinations */
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;
  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;
  
  /* Primary Blue - Lighter for dark theme */
  --primary: 217.2 91.2% 59.8%;
  --primary-foreground: 222.2 47.4% 11.2%;
  
  /* Secondary - Dark gray */
  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;
  
  /* Muted - Medium gray */
  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;
  
  /* Accent - Dark blue */
  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;
  
  /* Destructive */
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 210 40% 98%;
  
  /* Borders and inputs - Dark gray */
  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;
  --ring: 224.3 76.3% 48%;
  
  /* Success and Warning colors for dark mode */
  --success: 142.1 70.6% 45.3%;
  --success-foreground: 210 40% 98%;
  --warning: 38 92% 50%;
  --warning-foreground: 222.2 84% 4.9%;
}

@layer base {
  * {
    @apply border-border;
  }
  
  /* Smooth scroll behavior and better font rendering */
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 100px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    overflow-x: hidden;
    width: 100%;
    -webkit-text-size-adjust: 100%;
  }
  
  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--primary) / 0.5) hsl(var(--muted));
  }
  
  /* Custom text selection color */
  ::selection {
    @apply bg-primary/20 text-foreground;
  }
  
  ::-moz-selection {
    @apply bg-primary/20 text-foreground;
  }
  
  /* Focus styles for accessibility - only remove outline for mouse users */
  *:focus:not(:focus-visible) {
    @apply outline-none;
  }
  
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary ring-2 ring-primary/20;
  }
  
  /* Improve button and link accessibility */
  button:focus-visible,
  a:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }
  
  /* Disable outline for mouse users, keep for keyboard users */
  button:focus:not(:focus-visible),
  a:focus:not(:focus-visible) {
    @apply outline-none;
  }
  
  /* Better mobile focus */
  @media (max-width: 768px) {
    *:focus-visible {
      @apply outline-2 outline-offset-2 ring-2 ring-primary/30;
    }
    
    ::-webkit-scrollbar {
      width: 0;
      background: transparent;
    }
    
    * {
      scrollbar-width: none;
    }
  }
}

/* Highlight TOC target heading when clicked */
[data-toc-heading="true"]:target {
  animation: highlightHeading 1s ease-out;
}

@keyframes highlightHeading {
  0% {
    background-color: hsl(var(--primary) / 0.2);
  }
  100% {
    background-color: transparent;
  }
}

/* Custom styles for the Multigyan blog */
@layer components {
  .prose {
    @apply max-w-none text-foreground;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply font-bold text-foreground;
  }

  .prose p {
    @apply text-muted-foreground leading-relaxed;
  }

  .prose a {
    @apply text-primary hover:text-primary/80 no-underline transition-colors duration-200;
  }

  .prose blockquote {
    @apply border-l-4 border-primary/20 bg-muted/50 px-4 py-2 italic;
  }

  .prose code {
    @apply bg-muted px-1.5 py-0.5 rounded text-sm font-mono;
  }

  .prose pre {
    @apply bg-muted p-4 rounded-lg overflow-x-auto;
  }

  .prose pre code {
    @apply bg-transparent p-0;
  }
  
  .prose img {
    @apply rounded-lg shadow-md;
  }
  
  .prose table {
    @apply w-full border-collapse;
  }
  
  .prose th,
  .prose td {
    @apply border border-border p-2 text-left;
  }
  
  .prose th {
    @apply bg-muted font-semibold;
  }

  /* Blog post cards with improved hover effects */
  .blog-card {
    @apply bg-card rounded-lg border shadow-sm transition-all duration-300 overflow-hidden;
    contain: layout style paint; /* ✅ Performance: Isolate rendering */
  }

  .blog-card:hover {
    @apply shadow-xl transform -translate-y-1 border-primary/20;
  }
  
  /* Card loading state */
  .blog-card-skeleton {
    @apply bg-muted/50 animate-pulse rounded-lg;
  }

  /* Blue gradient for headings */
  .title-gradient {
    @apply bg-gradient-to-r from-primary via-blue-600 to-blue-800 bg-clip-text text-transparent;
  }

  /* Blue accent backgrounds */
  .blue-accent-bg {
    @apply bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/20 dark:to-blue-900/20;
  }

  /* Shimmer loading animation (improved) */
  .animate-shimmer {
    animation: shimmer 2s infinite linear;
    background: linear-gradient(
      90deg,
      hsl(var(--muted)) 0%,
      hsl(var(--muted-foreground) / 0.15) 20%,
      hsl(var(--muted-foreground) / 0.15) 40%,
      hsl(var(--muted)) 100%
    );
    background-size: 200% 100%;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  /* Skeleton loading for cards */
  .skeleton {
    @apply bg-muted animate-shimmer rounded;
  }
  
  .skeleton-text {
    @apply h-4 bg-muted animate-shimmer rounded;
  }
  
  .skeleton-circle {
    @apply rounded-full bg-muted animate-shimmer;
  }
  
  /* TOC loading skeleton */
  .toc-skeleton {
    @apply space-y-2;
  }

  .toc-skeleton-item {
    @apply h-8 bg-muted animate-shimmer rounded;
  }

  /* Custom scrollbar with blue theme */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800 rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-blue-300 dark:bg-blue-600 rounded-full hover:bg-blue-400 dark:hover:bg-blue-500 transition-colors;
  }

  /* Hero section styling */
  .hero-section {
    @apply bg-gradient-to-br from-blue-50 via-white to-gray-50 dark:from-slate-900 dark:via-blue-950/20 dark:to-slate-800;
  }

  /* Feature cards with improved interactions */
  .feature-card {
    @apply bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-xl p-6 shadow-sm transition-all duration-300;
  }
  
  .feature-card:hover {
    @apply shadow-lg border-blue-300 dark:border-blue-600 transform -translate-y-1;
  }
  
  /* Button variants */
  .btn-primary {
    @apply bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 transition-all duration-200;
  }
  
  .btn-secondary {
    @apply bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70 transition-all duration-200;
  }
  
  /* Input focus states */
  input:focus,
  textarea:focus,
  select:focus {
    @apply ring-2 ring-primary/20 border-primary transition-all duration-200;
  }
  
  /* Badge styles */
  .badge-primary {
    @apply bg-primary/10 text-primary border border-primary/20 px-2 py-1 rounded-full text-xs font-medium;
  }
  
  .badge-success {
    @apply bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 px-2 py-1 rounded-full text-xs font-medium;
  }
  
  .badge-warning {
    @apply bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400 px-2 py-1 rounded-full text-xs font-medium;
  }
  
  .badge-error {
    @apply bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 px-2 py-1 rounded-full text-xs font-medium;
  }

  /* TipTap Editor Styles */
  .ProseMirror {
    @apply outline-none min-h-[300px] p-4;
  }
  
  .ProseMirror:focus {
    @apply outline-none;
  }

  .ProseMirror h1 {
    @apply text-3xl font-bold mb-4 mt-6 text-foreground;
  }

  .ProseMirror h2 {
    @apply text-2xl font-bold mb-3 mt-5 text-foreground;
  }

  .ProseMirror h3 {
    @apply text-xl font-bold mb-2 mt-4 text-foreground;
  }

  .ProseMirror h4 {
    @apply text-lg font-semibold mb-2 mt-3 text-foreground;
  }

  .ProseMirror h5 {
    @apply text-base font-semibold mb-2 mt-3 text-foreground;
  }

  .ProseMirror h6 {
    @apply text-sm font-semibold mb-2 mt-3 text-foreground;
  }

  /* ✅ FIXED: Reduced paragraph spacing */
  .ProseMirror p {
    @apply mb-2 mt-1 text-muted-foreground leading-[1.6];
  }
  
  .ProseMirror p:first-child {
    @apply mt-0;
  }
  
  .ProseMirror p:last-child {
    @apply mb-0;
  }
  
  /* Prose paragraph spacing handled in lines 194-196 */

  .ProseMirror ul,
  .ProseMirror ol {
    @apply pl-6 mb-3;
  }

  .ProseMirror li {
    @apply mb-1 text-muted-foreground;
  }
  
  .ProseMirror ul li {
    @apply list-disc;
  }
  
  .ProseMirror ol li {
    @apply list-decimal;
  }

  .ProseMirror blockquote {
    @apply border-l-4 border-blue-300 dark:border-blue-600 pl-4 py-2 my-4 bg-blue-50 dark:bg-blue-950/20 rounded-r-md italic;
  }

  .ProseMirror blockquote p {
    @apply mb-0;
  }

  .ProseMirror code {
    @apply bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono text-foreground;
  }

  .ProseMirror pre {
    @apply bg-gray-100 dark:bg-gray-800 p-4 rounded-lg my-4 overflow-x-auto;
  }

  .ProseMirror pre code {
    @apply bg-transparent p-0;
  }

  .ProseMirror a {
    @apply text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 underline transition-colors;
  }

  .ProseMirror img {
    @apply max-w-full h-auto rounded-lg border border-gray-200 dark:border-gray-700 my-4;
  }
  
  /* ✅ Image with alt text - add empty alt attribute support */
  .ProseMirror img:not([alt]) {
    @apply after:content-[''] after:block;
  }

  .ProseMirror hr {
    @apply border-t border-gray-300 dark:border-gray-600 my-6;
  }

  .ProseMirror strong {
    @apply font-bold;
  }

  .ProseMirror em {
    @apply italic;
  }

  .ProseMirror s {
    @apply line-through;
  }
  
  .ProseMirror mark {
    @apply bg-yellow-200 dark:bg-yellow-900/40 px-0.5 rounded;
  }
  
  /* Placeholder for empty editor */
  .ProseMirror p.is-editor-empty:first-child::before {
    @apply text-muted-foreground;
    content: attr(data-placeholder);
    float: left;
    pointer-events: none;
    height: 0;
  }

  /* Syntax Highlighting for Code Blocks */
  .hljs {
    @apply bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto;
  }

  .hljs-comment,
  .hljs-quote {
    @apply text-gray-500 italic;
  }

  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-addition {
    @apply text-green-400;
  }

  .hljs-number,
  .hljs-string,
  .hljs-literal,
  .hljs-doctag,
  .hljs-regexp {
    @apply text-red-400;
  }

  .hljs-title,
  .hljs-section,
  .hljs-name {
    @apply text-yellow-400;
  }

  .hljs-attribute,
  .hljs-attr,
  .hljs-variable {
    @apply text-cyan-400;
  }

  /* Code block wrapper */
  .code-block-wrapper {
    @apply relative group;
  }
  
  .code-copy-button {
    @apply absolute top-2 right-2 bg-gray-700 hover:bg-gray-600 text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-all duration-200 cursor-pointer;
  }
  
  /* Toast/Notification styles */
  .toast-success {
    @apply bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 text-green-800 dark:text-green-200;
  }
  
  .toast-error {
    @apply bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 text-red-800 dark:text-red-200;
  }
  
  .toast-warning {
    @apply bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-800 dark:text-yellow-200;
  }
  
  .toast-info {
    @apply bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 text-blue-800 dark:text-blue-200;
  }
  
  /* Form validation states */
  .input-error {
    @apply border-red-500 focus:ring-red-500/20 focus:border-red-500;
  }
  
  .input-success {
    @apply border-green-500 focus:ring-green-500/20 focus:border-green-500;
  }
  
  /* Image loading state */
  .image-loading {
    @apply bg-muted animate-shimmer;
  }
  
  /* Fade in animation */
  .fade-in {
    animation: fadeIn 0.3s ease-in;
    will-change: opacity, transform; /* ✅ Performance hint */
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Slide in animation */
  .slide-in {
    animation: slideIn 0.3s ease-out;
    will-change: transform, opacity; /* ✅ Performance hint */
  }
  
  @keyframes slideIn {
    from {
      transform: translateX(-100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  /* Scale in animation */
  .scale-in {
    animation: scaleIn 0.2s ease-out;
    will-change: transform, opacity; /* ✅ Performance hint */
  }
  
  @keyframes scaleIn {
    from {
      transform: scale(0.9);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
  
  /* Pulse animation for notifications */
  .pulse-once {
    animation: pulse 0.5s ease-in-out;
  }
  
  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.05);
    }
  }
  
  /* Mobile input styling */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  textarea,
  select {
    font-size: 16px;
  }
  
  @media (min-width: 768px) {
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="search"],
    input[type="tel"],
    input[type="url"],
    textarea,
    select {
      font-size: 0.875rem;
    }
  }
  
  /* Mobile card spacing */
  .card-mobile {
    @apply p-4 sm:p-5 md:p-6;
  }
  
  .card-content-mobile {
    @apply space-y-3 sm:space-y-4;
  }
  
  /* Mobile navigation */
  .mobile-nav-link {
    @apply flex items-center py-3 px-4 min-h-[48px] text-base hover:bg-accent rounded-md transition-all;
  }
  
  .mobile-menu-button {
    @apply h-12 w-12 flex items-center justify-center hover:bg-accent rounded-md transition-all;
  }
  
  /* Touch-friendly elements */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }
  
  .touch-target-large {
    @apply min-h-[48px] min-w-[48px];
  }
  
  .tap-highlight-none {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Mobile modal */
  .modal-mobile {
    @apply w-[95vw] sm:w-full max-w-lg max-h-[90vh] overflow-y-auto p-4 sm:p-6;
    contain: layout; /* ✅ Performance: Isolate layout */
  }
  
  .dialog-mobile {
    @apply rounded-lg sm:rounded-xl;
  }
  
  /* Mobile table wrapper */
  .table-mobile-wrapper {
    @apply w-full overflow-x-auto rounded-lg border;
    /* ❌ REMOVED: -webkit-overflow-scrolling: touch (deprecated in iOS 13+) */
  }
  
  .table-mobile-wrapper table {
    @apply min-w-full;
  }
  
  /* Mobile badges */
  .badge-mobile {
    @apply text-xs sm:text-sm px-2 py-1 sm:px-2.5 sm:py-1;
  }
  
  .pill-mobile {
    @apply text-xs sm:text-sm px-3 py-1.5 sm:px-4 sm:py-2 rounded-full;
  }
  
  /* Mobile card hover */
  .card-mobile-hover {
    @apply transition-all duration-300;
  }
  
  @media (hover: none) {
    .card-mobile-hover:hover {
      @apply transform-none shadow-none;
    }
  }
  
  @media (hover: hover) {
    .card-mobile-hover:hover {
      @apply -translate-y-1 shadow-xl;
    }
  }
  
  /* Mobile forms */
  .form-mobile {
    @apply space-y-4 sm:space-y-5;
  }
  
  .form-field-mobile {
    @apply space-y-2;
  }
  
  .form-label-mobile {
    @apply text-sm sm:text-base font-medium;
  }
  
  .form-input-mobile {
    @apply h-12 px-4 text-base rounded-md border;
  }
  
  .form-button-mobile {
    @apply w-full sm:w-auto h-12 px-6 text-base font-medium;
  }
  
  /* Mobile avatars */
  .avatar-xs-mobile {
    @apply w-5 h-5 sm:w-6 sm:h-6;
  }
  
  .avatar-sm-mobile {
    @apply w-7 h-7 sm:w-8 sm:h-8;
  }
  
  .avatar-md-mobile {
    @apply w-10 h-10 sm:w-12 sm:h-12;
  }
  
  .avatar-lg-mobile {
    @apply w-14 h-14 sm:w-16 sm:h-16;
  }
}

/* Utility classes */
@layer utilities {
  /* Text gradient */
  .text-gradient {
    @apply bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent;
  }
  
  /* ❌ REMOVED: line-clamp utilities (lines 789-815)
   * Use Tailwind's built-in line-clamp-{n} classes instead:
   * <div className="line-clamp-2">...</div>
   */
  
  /* Glass morphism */
  .glass {
    @apply bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border border-white/20 dark:border-gray-700/20;
  }
  
  /* Shadows */
  .shadow-soft {
    box-shadow: 0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04);
  }
  
  .shadow-hard {
    box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2);
  }
  
  /* Container */
  .container-custom {
    @apply mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl;
  }
  
  .container-mobile {
    @apply px-4 sm:px-6 lg:px-8;
  }
  
  .max-w-mobile {
    max-width: calc(100vw - 2rem);
  }
  
  @media (min-width: 640px) {
    .max-w-mobile {
      max-width: calc(100vw - 3rem);
    }
  }
  
  /* ❌ REMOVED: Responsive typography classes (lines 851-873)
   * Use Tailwind classes directly instead:
   * <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl">...</h1>
   */
  
  /* Spacing */
  .section-padding {
    @apply py-10 sm:py-12 md:py-16 lg:py-20;
  }
  
  .section-padding-x {
    @apply px-4 sm:px-6 lg:px-8;
  }
  
  .component-spacing {
    @apply space-y-6 sm:space-y-8 md:space-y-10;
  }
  
  .gap-mobile {
    @apply gap-4 sm:gap-6 md:gap-8;
  }
  
  /* ❌ REMOVED: Grid utilities (lines 893-903)
   * Use Tailwind classes directly instead:
   * <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">...</div>
   */
  
  /* Flex */
  .flex-mobile-col {
    @apply flex flex-col sm:flex-row;
  }
  
  .flex-mobile-col-reverse {
    @apply flex flex-col-reverse sm:flex-row;
  }
  
  .flex-mobile-wrap {
    @apply flex flex-wrap gap-2 sm:gap-3;
  }
  
  /* Transitions */
  .transition-mobile {
    @apply transition-all duration-200 ease-in-out;
  }
  
  .transition-mobile-slow {
    @apply transition-all duration-300 ease-in-out;
  }
}

/* Extra Small Breakpoint */
@media (min-width: 475px) {
  .xs\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  
  .xs\:flex-row {
    flex-direction: row;
  }
  
  .xs\:inline {
    display: inline;
  }
  
  .xs\:hidden {
    display: none;
  }
}

/* Safe area insets */
@supports (padding: env(safe-area-inset-top)) {
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Prevent zoom on double-tap */
@media (max-width: 768px) {
  a, button, input, select, textarea {
    touch-action: manipulation;
  }
}

/* NProgress Loading Bar */
#nprogress {
  pointer-events: none;
}

#nprogress .bar {
  background: hsl(var(--primary));
  position: fixed;
  z-index: 9999;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  box-shadow: 0 0 10px hsl(var(--primary)), 0 0 5px hsl(var(--primary));
}

#nprogress .peg {
  display: block;
  position: absolute;
  right: 0px;
  width: 100px;
  height: 100%;
  box-shadow: 0 0 10px hsl(var(--primary)), 0 0 5px hsl(var(--primary));
  opacity: 1.0;
  transform: rotate(3deg) translate(0px, -4px);
}

#nprogress .spinner {
  display: block;
  position: fixed;
  z-index: 9999;
  top: 15px;
  right: 15px;
}

#nprogress .spinner-icon {
  width: 18px;
  height: 18px;
  box-sizing: border-box;
  border: solid 2px transparent;
  border-top-color: hsl(var(--primary));
  border-left-color: hsl(var(--primary));
  border-radius: 50%;
  animation: nprogress-spinner 400ms linear infinite;
}

.nprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.nprogress-custom-parent #nprogress .spinner,
.nprogress-custom-parent #nprogress .bar {
  position: absolute;
}

@keyframes nprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Print styles */
@media print {
  nav, footer, .no-print {
    display: none !important;
  }
  
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  
  img {
    page-break-inside: avoid;
  }
  
  * {
    box-shadow: none !important;
    text-shadow: none !important;
  }
  
  body {
    background: white !important;
    color: black !important;
  }
  
  a {
    text-decoration: underline;
  }
  
  a[href]:after {
    content: " (" attr(href) ")";
  }
}

/* Responsive Typography */
@media (max-width: 640px) {
  .prose h1 {
    @apply text-2xl;
  }
  
  .prose h2 {
    @apply text-xl;
  }
  
  .prose h3 {
    @apply text-lg;
  }
}

/* ✅ FIXED: Table of Contents Mobile View */
@media (max-width: 768px) {
  .table-of-contents,
  [class*="toc"],
  [class*="TableOfContents"] {
    display: block !important;
    position: relative !important;
    width: 100% !important;
    max-width: 100% !important;
    margin-bottom: 2rem !important;
    padding: 1rem !important;
    background: hsl(var(--background)) !important;
    border: 1px solid hsl(var(--border)) !important;
    border-radius: 0.5rem !important;
  }
  
  .toc-title,
  .table-of-contents-title,
  [class*="toc"] h2,
  [class*="toc"] h3 {
    font-size: 1.125rem !important;
    font-weight: 600 !important;
    margin-bottom: 0.75rem !important;
  }
  
  .toc-list,
  .table-of-contents-list {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
}

/* Gradient animation for homepage */
@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient 3s ease infinite;
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .blog-card {
    @apply border-2;
  }
  
  button, a {
    @apply underline;
  }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
/* ✅ NEW: Image Caption Styles for Published Blogs */
.prose img[data-caption],
.ProseMirror img[data-caption] {
  @apply block mx-auto;
}

/* Caption container */
.prose img[data-caption]::after,
.ProseMirror img[data-caption]::after {
  content: attr(data-caption);
  @apply block text-center text-sm text-muted-foreground italic mt-2 px-4;
}

/* Credit/Source below caption */
.prose img[data-credit]::before,
.ProseMirror img[data-credit]::before {
  content: attr(data-credit);
  @apply block text-center text-xs text-muted-foreground/70 mt-1 mb-2;
}

/* When both caption and credit exist, adjust spacing */
.prose img[data-caption][data-credit]::after {
  @apply mb-1;
}

/* Figure-like styling for images with captions */
.prose img[data-caption],
.ProseMirror img[data-caption] {
  @apply mb-6 mt-6;
}

/* Mobile responsive caption text */
@media (max-width: 640px) {
  .prose img[data-caption]::after,
  .ProseMirror img[data-caption]::after {
    @apply text-xs px-2;
  }
  
  .prose img[data-credit]::before,
  .ProseMirror img[data-credit]::before {
    @apply text-[10px];
  }
}
